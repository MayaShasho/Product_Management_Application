(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{101:function(e,t,a){e.exports=a(213)},108:function(e,t,a){},112:function(e,t){},117:function(e,t){},119:function(e,t){},150:function(e,t){},152:function(e,t){},153:function(e,t){},158:function(e,t){},160:function(e,t){},180:function(e,t){},196:function(e,t){},199:function(e,t){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(56),l=a.n(c),o=(a(108),a(97));a.n(o).a.config({path:"../.env"});var i=a(9),s=a(4);a(203);var m=function(){return r.a.createElement("div",{className:"body-container"},r.a.createElement("div",{className:"home-container"},r.a.createElement("h1",null,"Welcome to Product Management App"),r.a.createElement("p",null,"Manage your products efficiently."),r.a.createElement("div",null,r.a.createElement(i.b,{to:"/login"},r.a.createElement("button",{className:"btn"},"Login")),r.a.createElement(i.b,{to:"/register"},r.a.createElement("button",{className:"btn"},"Register")))))},u=(a(204),a(214));const d="https://product-management-application-wgbx.onrender.com/api/auth";var p=function(e){let{setIsToken:t}=e;const[a,c]=Object(n.useState)(""),[l,o]=Object(n.useState)(""),[i,m]=Object(n.useState)(""),p=Object(s.q)();return r.a.createElement("div",{className:"auth-container"},r.a.createElement("h2",{className:"header"},"Login"),i&&r.a.createElement("p",{className:"error"},i),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=await(async(e,t)=>{try{return(await u.a.post(d+"/login",{email:e,password:t})).data.token}catch(i){var a,n;throw new Error((null===(a=i.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.error)||"Login failed")}})(a,l);localStorage.setItem("token",e),t(!0),p("/products")}catch(n){m("Login failed. Please check your email and password.")}}},r.a.createElement("input",{type:"email",placeholder:"Email",value:a,onChange:e=>c(e.target.value),required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",value:l,onChange:e=>o(e.target.value),required:!0}),r.a.createElement("button",{type:"submit",className:"btn"},"Submit")))};a(205);var E=function(){const[e,t]=Object(n.useState)(""),[a,c]=Object(n.useState)(""),[l,o]=Object(n.useState)(""),[i,m]=Object(n.useState)(""),p=Object(s.q)();return r.a.createElement("div",{className:"auth-container"},r.a.createElement("h2",{className:"header"},"Register"),i&&r.a.createElement("p",{className:"error"},i),r.a.createElement("form",{onSubmit:async t=>{t.preventDefault();try{await(async(e,t,a)=>{try{return(await u.a.post(d+"/register",{name:e,email:t,password:a})).data}catch(i){var n,r;throw console.log("error",i),new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.errors[0])||"Registration failed")}})(e,a,l),p("/login")}catch(n){m(n.message)}}},r.a.createElement("input",{type:"text",placeholder:"Name",value:e,onChange:e=>t(e.target.value),required:!0}),r.a.createElement("input",{type:"email",placeholder:"Email",value:a,onChange:e=>c(e.target.value),required:!0}),r.a.createElement("input",{type:"password",placeholder:"Password",value:l,onChange:e=>o(e.target.value),required:!0}),r.a.createElement("button",{type:"submit",className:"btn"},"Submit")))};a(206),a(207);const g="https://product-management-application-wgbx.onrender.com/api/products",b=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"created_at",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"desc";try{let l=`${g}?page=${a}&limit=${n}&sortBy=${r}&order=${c}`;t&&(l=`${g}/search?query=${encodeURIComponent(t)}&sortBy=${r}&order=${c}`);return(await u.a.get(l,{headers:{Authorization:"Bearer "+e}})).data}catch(l){console.error("Error fetching products:",l)}};a(208);var h=a(37);var v=function(e){let{product:t,onUpdate:a,onClose:c}=e;const[l,o]=Object(n.useState)({name:t.name,description:t.description,price:t.price}),i=e=>{o({...l,[e.target.name]:e.target.value})};return r.a.createElement("div",{className:"modal",onClick:c},r.a.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},r.a.createElement("button",{className:"close-btn",onClick:c},r.a.createElement(h.a,null)),r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"card-title"},"Edit Product")),r.a.createElement("form",{onSubmit:e=>{e.preventDefault(),a(t.id,l)}},r.a.createElement("div",{className:"product-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"name",className:"form-label"},"Name"),r.a.createElement("input",{type:"text",name:"name",value:l.name,onChange:i,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"description",className:"form-label"},"Description"),r.a.createElement("input",{type:"text",name:"description",value:l.description,onChange:i,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"price",className:"form-label"},"Price"),r.a.createElement("input",{type:"number",name:"price",value:l.price,onChange:i,required:!0})),r.a.createElement("button",{type:"submit",className:"btn"},"Update")))))};var f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const[a,r]=Object(n.useState)(e);return Object(n.useEffect)(()=>{const a=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(a)}},[e,t]),a};a(209);var N=a(22);var y=e=>{let{products:t,loading:a,setEditProduct:n,handleDeleteProduct:c,onSort:l,sortBy:o,order:i}=e;if(a)return r.a.createElement("div",null,"loading products...");const s=e=>o===e?"asc"===i?r.a.createElement(N.b,null):r.a.createElement(N.a,null):r.a.createElement(N.c,null);return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"name-column"},"Name"),r.a.createElement("th",{className:"description-column"},"Description"),r.a.createElement("th",{className:"price-column",onClick:()=>l("price")},"Price ",s("price")),r.a.createElement("th",{className:"created-at-column",onClick:()=>l("created_at")},"Created At ",s("created_at")),r.a.createElement("th",{className:"action-column"},"Actions"))),r.a.createElement("tbody",null,0===t.length?r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"5"},"No products found")):t.map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,"$",e.price),r.a.createElement("td",null,(e=>{const t=new Date(e);return`${t.toLocaleDateString("en-GB")} ${t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}`})(e.created_at)),r.a.createElement("td",null,r.a.createElement("button",{className:"edit-btn",onClick:()=>n(e)},"Edit"),r.a.createElement("button",{className:"delete-btn",onClick:()=>c(e.id)},"Delete"))))))};a(210);var C=e=>{let{onSubmit:t,onClose:a}=e;const[c,l]=Object(n.useState)({name:"",description:"",price:""});return r.a.createElement("div",{className:"modal",onClick:a},r.a.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},r.a.createElement("button",{className:"close-btn",onClick:a},r.a.createElement(h.a,null)),r.a.createElement("div",{className:"card-header"},r.a.createElement("h2",{className:"card-title"},"Add New Product")),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),await t(c),l({name:"",description:"",price:""})}},r.a.createElement("div",{className:"product-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"name",className:"form-label"},"Name"),r.a.createElement("input",{className:"form-input",type:"text",placeholder:"Name",value:c.name,onChange:e=>l({...c,name:e.target.value}),required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"description",className:"form-label"},"Description"),r.a.createElement("input",{className:"form-input",type:"text",placeholder:"Description",value:c.description,onChange:e=>l({...c,description:e.target.value}),required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"price",className:"form-label"},"Price"),r.a.createElement("input",{className:"form-input",type:"number",placeholder:"Price",value:c.price,onChange:e=>l({...c,price:parseFloat(e.target.value)||""}),required:!0})),r.a.createElement("button",{type:"submit",className:"btn"},"Create Product")))))},S=a(98),P=a.n(S),w=a(99),k=a.n(w);a(211);var O=function(e){let{currentPage:t,totalPages:a,onPageChange:n}=e;return console.log("currentPage",t),console.log("totalPages",a),a<=1?null:r.a.createElement("div",{className:"pagination"},r.a.createElement("button",{className:"page-btn",onClick:()=>n(t-1),disabled:1===t},"Previous"),[...Array(a)].map((e,a)=>r.a.createElement("button",{key:a+1,className:"page-btn "+(t===a+1?"active":""),onClick:()=>n(a+1)},a+1)),r.a.createElement("button",{className:"page-btn",onClick:()=>n(t+1),disabled:t===a},"Next"))};const j=k()(P.a);var A=function(){const[e,t]=Object(n.useState)([]),[a,c]=Object(n.useState)(!0),[l,o]=Object(n.useState)(""),[i,s]=Object(n.useState)(null),m=f(l,500),[d,p]=Object(n.useState)(!1),[E,h]=Object(n.useState)(1),[N,S]=Object(n.useState)(1),[P,w]=Object(n.useState)("created_at"),[k,A]=Object(n.useState)("desc"),_=localStorage.getItem("token");Object(n.useEffect)(()=>{(async()=>{try{c(!0);const{products:e,totalPages:a}=await b(_,m,E,5,P,k);(null===e||void 0===e?void 0:e.length)&&t(e),S(a||1)}catch(e){console.error("Error fetching products:",e)}finally{c(!1)}})()},[m,_,E,P,k]);const T=async()=>{const{products:e}=await b(_);t(e)};return r.a.createElement("div",{className:"product-container"},r.a.createElement("h2",{className:"title"},"Product List"),r.a.createElement("div",{className:"search-container"},r.a.createElement("input",{type:"text",placeholder:"Search products...",value:l,onChange:e=>o(e.target.value),className:"search-bar"})),r.a.createElement("button",{onClick:()=>p(!0),className:"add-product-btn btn"},"+ Add New Product"),r.a.createElement(y,{products:e,loading:a,setEditProduct:s,handleDeleteProduct:async e=>{(await j.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",iconColor:"#2C3930",color:"#2C3930",showCancelButton:!0,confirmButtonColor:"#6a8b75",cancelButtonColor:"#aa4444",confirmButtonText:"Yes, delete it!"})).isConfirmed&&(o(""),h(1),await(async(e,t)=>{try{await u.a.delete(`${g}/${t}`,{headers:{Authorization:"Bearer "+e}})}catch(a){console.error("Error deleting product:",a)}})(_,e),T())},onSort:e=>{let t="asc";P===e&&(t="asc"===k?"desc":"asc"),w(e),A(t)},sortBy:P,order:k}),r.a.createElement(O,{currentPage:E,onPageChange:e=>{e>0&&e<=N&&h(e)},totalPages:N}),i&&r.a.createElement(v,{product:i,onUpdate:async(e,t)=>{await(async(e,t,a)=>{try{console.log("productId",t),await u.a.put(`${g}/${t}`,a,{headers:{Authorization:"Bearer "+e}})}catch(n){console.error("Error updating product:",n)}})(_,e,t),s(null),o(""),T()},onClose:()=>s(null)}),d&&r.a.createElement(C,{onSubmit:async e=>{await(async(e,t)=>{try{await u.a.post(g,t,{headers:{Authorization:"Bearer "+e}})}catch(a){console.error("Error creating product:",a)}})(_,e),o(""),h(1),T()},onClose:()=>p(!1)}))};var _=e=>{let{children:t}=e;return localStorage.getItem("token")?t:r.a.createElement(s.a,{to:"/login"})};a(212);var T=function(e){let{isToken:t,setIsToken:a}=e;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("h2",null,"Product App"),r.a.createElement("div",{className:"navbar-links-container"},r.a.createElement(i.b,{to:"/"},"Home"),t?r.a.createElement(i.b,{to:"/",onClick:()=>{localStorage.removeItem("token"),a(!1)}},"Logout"):r.a.createElement(i.b,{to:"/login"},"Login"),r.a.createElement(i.b,{to:"/register"},"Register")))};var D=function(){const[e,t]=Object(n.useState)(!!localStorage.getItem("token"));return r.a.createElement(i.a,{basename:Object({NODE_ENV:"production",PUBLIC_URL:"/Product_Management_Application",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_PRODUCTS_URL:"https://product-management-application-wgbx.onrender.com/api/products",REACT_APP_AUTH_URL:"https://product-management-application-wgbx.onrender.com/api/auth"}).REACT_APP_BASENAME||"/"},r.a.createElement(T,{isToken:e,setIsToken:t}),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",element:r.a.createElement(m,null)}),r.a.createElement(s.b,{path:"/login",element:r.a.createElement(p,{setIsToken:t})}),r.a.createElement(s.b,{path:"/register",element:r.a.createElement(E,null)}),r.a.createElement(s.b,{path:"/products",element:r.a.createElement(_,null,r.a.createElement(A,null))})))};l.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(D,null)))}},[[101,1,2]]]);
//# sourceMappingURL=main.e45833ae.chunk.js.map